<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style>
      body {
        font-family: "Microsoft JhengHei", "Microsoft YaHei", STHeiti,
          sans-serif;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script
      crossorigin
      src="https://unpkg.com/react@16/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script type="text/babel">

      function longTimeWork(prev) {
        for (let i = 1; i <= 100000000; i++) ;
        document.title = `我改了標題，但不知道為甚麼要改 - ${Math.floor(Math.random() * 100)}`;
        return prev + 1;
      }

      function App(props) {
        var [data1, setData1] = React.useState(0);
        var [data2, setData2] = React.useState(0);

        // 只有在data1有更動的時候() => {}內的內容才會被執行 用於避免消耗大量資源的更動
        // var workResult = longTimeWork(data1);
        var workResult = React.useMemo(() => {
          console.log("我在學一號")
          return longTimeWork(data1+data2)
        }, [data1,data2]);

        let changeData1 = () => {
          setData1( data1 + 1)
        }

        let changeData2 = () => {
          setData2( data2 + 1)
        }

        return (
          <React.Fragment>
            <h3>我是很長的一號: {workResult}, 我是一號: {data1}, 我是零號: {data2}</h3>
            <button class="btn btn-outline-success" onClick={changeData1}>我讓一號變長</button>
            <button class="btn btn-outline-primary" onClick={changeData2}>我讓零號變長</button>
          </React.Fragment>
        );
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
