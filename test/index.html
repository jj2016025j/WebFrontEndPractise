<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="typesetting">
        <button class="btn" id="toggle-btn" class="element">切換</button>
        <button class="btn" onclick="onClick(this)">Learn more</button>
        <div class="box box-animation"></div>
        <div id="addlist">addlist test</div>
        <h1 class="animate infinite bounce animate--fast">Hello World</h1>
        <h2 class="animate infinite slideInLeft animate--slow">Hello World2</h1>
        <h3 class="animate infinite rotate animate--slow">Hello World3</h1>
    </section>
    
    <a href="https://www.mythrillfiction.com/the-dark-rider" alt="Mythrill" target="_blank">
    <div class="card">
        <div class="wrapper">
        <img src="https://ggayane.github.io/css-experiments/cards/dark_rider-cover.jpg" class="cover-image" />
        </div>
        <img src="https://ggayane.github.io/css-experiments/cards/dark_rider-title.png" class="title" />
        <img src="https://ggayane.github.io/css-experiments/cards/dark_rider-character.webp" class="character" />
    </div>
    </a>

    <a href="https://www.mythrillfiction.com/force-mage" alt="Mythrill" target="_blank">
    <div class="card">
        <div class="wrapper">
        <img src="https://ggayane.github.io/css-experiments/cards/force_mage-cover.jpg" class="cover-image" />
        </div>
        <img src="https://ggayane.github.io/css-experiments/cards/force_mage-title.png" class="title" />
        <img src="https://ggayane.github.io/css-experiments/cards/force_mage-character.webp" class="character" />
    </div>
    </a>
    <audio src="your-audio-file.mp3" controls></audio>
    <div></div>
    <div class="your-element">Some content</div>
    <style>
        #visualElement {
        /* 初始樣式 */
        }
    </style>
    
    <audio id="audioElement" src="your-audio-file.mp3" controls></audio>
    <div id="visualElement">視覺效果將在這裡顯示</div>

    <script>
        // 創建一個AudioContext實例
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // 選擇音頻和視覺元素
        const audioElement = document.getElementById('audioElement');
        const visualElement = document.getElementById('visualElement');
        const track = audioContext.createMediaElementSource(audioElement);

        // 創建一個分析器節點
        const analyser = audioContext.createAnalyser();
        track.connect(analyser);
        analyser.connect(audioContext.destination);

        // 分析音頻數據
        function update() {
        const dataArray = new Uint8Array(analyser.frequencyBinCount);
        analyser.getByteFrequencyData(dataArray);

        // 計算音量
        const volume = dataArray.reduce((acc, val) => acc + val, 0) / dataArray.length;

        // 根據音量動態調整視覺元素的CSS樣式
        visualElement.style.opacity = volume / 100;

        // 持續更新
        requestAnimationFrame(update);
        }

        // 啟動更新函數
        update();

    </script>
        <script src="test.js"></script>

    <!-- <script src="music-tempo.min.js"></script> -->
    <script src="script.js"></script>
</body>
</html>